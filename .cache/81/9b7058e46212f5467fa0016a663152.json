{"id":"ZiV1","dependencies":[{"name":"/Users/ellenwang/Desktop/Ellen practice/Projects/Node projects/Projects/kimchi daddy/package.json","includedInParent":true,"mtime":1627058517687},{"name":"mongoose","loc":{"line":1,"column":25},"parent":"/Users/ellenwang/Desktop/Ellen practice/Projects/Node projects/Projects/kimchi daddy/models/userModel.js","resolved":"/Users/ellenwang/Desktop/Ellen practice/Projects/Node projects/Projects/kimchi daddy/node_modules/mongoose/dist/browser.umd.js"},{"name":"validator","loc":{"line":2,"column":26},"parent":"/Users/ellenwang/Desktop/Ellen practice/Projects/Node projects/Projects/kimchi daddy/models/userModel.js","resolved":"/Users/ellenwang/Desktop/Ellen practice/Projects/Node projects/Projects/kimchi daddy/node_modules/validator/index.js"},{"name":"bcryptjs","loc":{"line":3,"column":23},"parent":"/Users/ellenwang/Desktop/Ellen practice/Projects/Node projects/Projects/kimchi daddy/models/userModel.js","resolved":"/Users/ellenwang/Desktop/Ellen practice/Projects/Node projects/Projects/kimchi daddy/node_modules/bcryptjs/dist/bcrypt.js"},{"name":"crypto","loc":{"line":4,"column":23},"parent":"/Users/ellenwang/Desktop/Ellen practice/Projects/Node projects/Projects/kimchi daddy/models/userModel.js","resolved":"/Users/ellenwang/Desktop/Ellen practice/Projects/Node projects/Projects/kimchi daddy/node_modules/crypto-browserify/index.js"}],"generated":{"js":"function e(e,r,t,n,s,a,i){try{var o=e[a](i),u=o.value}catch(d){return void t(d)}o.done?r(u):Promise.resolve(u).then(n,s)}function r(r){return function(){var t=this,n=arguments;return new Promise(function(s,a){var i=r.apply(t,n);function o(r){e(i,s,a,o,u,\"next\",r)}function u(r){e(i,s,a,o,u,\"throw\",r)}o(void 0)})}}var t=require(\"mongoose\"),n=require(\"validator\"),s=require(\"bcryptjs\"),a=require(\"crypto\"),i=new t.Schema({name:{type:String,required:[!0,\"Please tell us your name\"]},email:{type:String,required:[!0,\"Please provide your email\"],unique:!0,lowercase:!0,validate:[n.isEmail,\"Invalid email\"]},role:{type:String,enum:[\"user\",\"admin\"],default:\"user\"},photo:String,password:{type:String,required:[!0,\"Please provide a password\"],minLength:8,select:!1},passwordConfirm:{type:String,required:[!0,\"Please confirm your password\"],validate:{validator:function(e){return e===this.password},message:\"passwords are not the same\"}},passwordChangedAt:Date,passwordResetToken:String,passwordResetExpires:Date,active:{type:Boolean,default:!0,select:!1},shoppingCart:[{name:String,image:String,price:Number,quantity:{type:Number,default:0}}],favoriteProducts:{type:[t.Schema.ObjectId],ref:\"Product\"}});i.pre(\"save\",function(){var e=r(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isModified(\"password\")){e.next=2;break}return e.abrupt(\"return\",r());case 2:return e.next=4,s.hash(this.password,12);case 4:this.password=e.sent,this.passwordConfirm=void 0,r();case 7:case\"end\":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}()),i.pre(\"save\",function(e){if(!this.isModified(\"password\")||this.isNew)return e();this.passwordChangedAt=Date.now(),e()}),i.pre(/^find/,function(e){this.populate({path:\"favoriteProducts\",select:\"-quantity -createdAt -images\"}),e()}),i.pre(/^find/,function(e){this.find({active:{$ne:!1}}),e()}),i.methods.correctPassword=function(){var e=r(regeneratorRuntime.mark(function e(r,t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.compare(r,t);case 2:return e.abrupt(\"return\",e.sent);case 3:case\"end\":return e.stop()}},e)}));return function(r,t){return e.apply(this,arguments)}}(),i.methods.changedPasswordAfter=function(e){return!!this.passwordChangedAt&&e<parseInt(this.passwordChangedAt.getTime()/1e3)},i.methods.createPasswordResetToken=function(){var e=a.randomBytes(32).toString(\"hex\");return this.passwordResetToken=a.createHash(\"sha256\").update(e).digest(\"hex\"),this.passwordResetExpires=Date.now()+6e5,e};var o=t.model(\"User\",i);module.exports=o;"},"sourceMaps":{"js":{"mappings":[{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":0}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":9}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":11}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":13}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":15}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":17}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":19}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":21}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":23}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":26}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":30}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":34}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":36}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":38}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":41}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":44}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":46}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":48}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":54}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":60}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":63}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":75}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":77}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":80}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":82}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":87}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":89}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":92}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":100}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":108}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":111}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":116}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":118}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":121}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":130}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":132}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":135}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":142}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":153}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":157}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":159}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":164}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":166}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":176}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":183}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":187}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":195}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":204}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":206}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":209}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":213}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":215}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":217}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":223}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":225}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":228}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":237}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":239}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":242}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":244}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":246}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":248}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":250}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":252}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":254}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":261}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":264}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":273}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":275}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":278}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":280}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":282}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":284}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":286}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":288}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":290}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":298}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":301}},{"source":"../../models/userModel.js","original":{"line":141,"column":0},"generated":{"line":1,"column":308}},{"source":"../../models/userModel.js","original":{"line":1,"column":0},"generated":{"line":1,"column":314}},{"source":"../../models/userModel.js","name":"mongoose","original":{"line":1,"column":6},"generated":{"line":1,"column":318}},{"source":"../../models/userModel.js","name":"require","original":{"line":1,"column":17},"generated":{"line":1,"column":320}},{"source":"../../models/userModel.js","original":{"line":1,"column":25},"generated":{"line":1,"column":328}},{"source":"../../models/userModel.js","name":"validator","original":{"line":2,"column":6},"generated":{"line":1,"column":340}},{"source":"../../models/userModel.js","name":"require","original":{"line":2,"column":18},"generated":{"line":1,"column":342}},{"source":"../../models/userModel.js","original":{"line":2,"column":26},"generated":{"line":1,"column":350}},{"source":"../../models/userModel.js","name":"bcrypt","original":{"line":3,"column":6},"generated":{"line":1,"column":363}},{"source":"../../models/userModel.js","name":"require","original":{"line":3,"column":15},"generated":{"line":1,"column":365}},{"source":"../../models/userModel.js","original":{"line":3,"column":23},"generated":{"line":1,"column":373}},{"source":"../../models/userModel.js","name":"crypto","original":{"line":4,"column":6},"generated":{"line":1,"column":385}},{"source":"../../models/userModel.js","name":"require","original":{"line":4,"column":15},"generated":{"line":1,"column":387}},{"source":"../../models/userModel.js","original":{"line":4,"column":23},"generated":{"line":1,"column":395}},{"source":"../../models/userModel.js","name":"userSchema","original":{"line":6,"column":6},"generated":{"line":1,"column":405}},{"source":"../../models/userModel.js","original":{"line":6,"column":19},"generated":{"line":1,"column":407}},{"source":"../../models/userModel.js","name":"mongoose","original":{"line":6,"column":23},"generated":{"line":1,"column":411}},{"source":"../../models/userModel.js","name":"Schema","original":{"line":6,"column":32},"generated":{"line":1,"column":413}},{"source":"../../models/userModel.js","original":{"line":7,"column":2},"generated":{"line":1,"column":420}},{"source":"../../models/userModel.js","name":"name","original":{"line":8,"column":4},"generated":{"line":1,"column":421}},{"source":"../../models/userModel.js","original":{"line":8,"column":10},"generated":{"line":1,"column":426}},{"source":"../../models/userModel.js","name":"type","original":{"line":9,"column":6},"generated":{"line":1,"column":427}},{"source":"../../models/userModel.js","name":"String","original":{"line":9,"column":12},"generated":{"line":1,"column":432}},{"source":"../../models/userModel.js","name":"required","original":{"line":10,"column":6},"generated":{"line":1,"column":439}},{"source":"../../models/userModel.js","original":{"line":10,"column":16},"generated":{"line":1,"column":448}},{"source":"../../models/userModel.js","original":{"line":10,"column":17},"generated":{"line":1,"column":450}},{"source":"../../models/userModel.js","original":{"line":10,"column":23},"generated":{"line":1,"column":452}},{"source":"../../models/userModel.js","name":"email","original":{"line":12,"column":4},"generated":{"line":1,"column":481}},{"source":"../../models/userModel.js","original":{"line":12,"column":11},"generated":{"line":1,"column":487}},{"source":"../../models/userModel.js","name":"type","original":{"line":13,"column":6},"generated":{"line":1,"column":488}},{"source":"../../models/userModel.js","name":"String","original":{"line":13,"column":12},"generated":{"line":1,"column":493}},{"source":"../../models/userModel.js","name":"required","original":{"line":14,"column":6},"generated":{"line":1,"column":500}},{"source":"../../models/userModel.js","original":{"line":14,"column":16},"generated":{"line":1,"column":509}},{"source":"../../models/userModel.js","original":{"line":14,"column":17},"generated":{"line":1,"column":511}},{"source":"../../models/userModel.js","original":{"line":14,"column":23},"generated":{"line":1,"column":513}},{"source":"../../models/userModel.js","name":"unique","original":{"line":15,"column":6},"generated":{"line":1,"column":542}},{"source":"../../models/userModel.js","original":{"line":15,"column":14},"generated":{"line":1,"column":550}},{"source":"../../models/userModel.js","name":"lowercase","original":{"line":16,"column":6},"generated":{"line":1,"column":552}},{"source":"../../models/userModel.js","original":{"line":16,"column":17},"generated":{"line":1,"column":563}},{"source":"../../models/userModel.js","name":"validate","original":{"line":17,"column":6},"generated":{"line":1,"column":565}},{"source":"../../models/userModel.js","original":{"line":17,"column":16},"generated":{"line":1,"column":574}},{"source":"../../models/userModel.js","name":"validator","original":{"line":17,"column":17},"generated":{"line":1,"column":575}},{"source":"../../models/userModel.js","name":"isEmail","original":{"line":17,"column":27},"generated":{"line":1,"column":577}},{"source":"../../models/userModel.js","original":{"line":17,"column":36},"generated":{"line":1,"column":585}},{"source":"../../models/userModel.js","name":"role","original":{"line":20,"column":4},"generated":{"line":1,"column":603}},{"source":"../../models/userModel.js","original":{"line":20,"column":10},"generated":{"line":1,"column":608}},{"source":"../../models/userModel.js","name":"type","original":{"line":21,"column":6},"generated":{"line":1,"column":609}},{"source":"../../models/userModel.js","name":"String","original":{"line":21,"column":12},"generated":{"line":1,"column":614}},{"source":"../../models/userModel.js","name":"enum","original":{"line":22,"column":6},"generated":{"line":1,"column":621}},{"source":"../../models/userModel.js","original":{"line":22,"column":12},"generated":{"line":1,"column":626}},{"source":"../../models/userModel.js","original":{"line":22,"column":13},"generated":{"line":1,"column":627}},{"source":"../../models/userModel.js","original":{"line":22,"column":21},"generated":{"line":1,"column":634}},{"source":"../../models/userModel.js","name":"default","original":{"line":23,"column":6},"generated":{"line":1,"column":643}},{"source":"../../models/userModel.js","original":{"line":23,"column":15},"generated":{"line":1,"column":651}},{"source":"../../models/userModel.js","name":"photo","original":{"line":26,"column":4},"generated":{"line":1,"column":659}},{"source":"../../models/userModel.js","name":"String","original":{"line":26,"column":11},"generated":{"line":1,"column":665}},{"source":"../../models/userModel.js","name":"password","original":{"line":27,"column":4},"generated":{"line":1,"column":672}},{"source":"../../models/userModel.js","original":{"line":27,"column":14},"generated":{"line":1,"column":681}},{"source":"../../models/userModel.js","name":"type","original":{"line":28,"column":6},"generated":{"line":1,"column":682}},{"source":"../../models/userModel.js","name":"String","original":{"line":28,"column":12},"generated":{"line":1,"column":687}},{"source":"../../models/userModel.js","name":"required","original":{"line":29,"column":6},"generated":{"line":1,"column":694}},{"source":"../../models/userModel.js","original":{"line":29,"column":16},"generated":{"line":1,"column":703}},{"source":"../../models/userModel.js","original":{"line":29,"column":17},"generated":{"line":1,"column":705}},{"source":"../../models/userModel.js","original":{"line":29,"column":23},"generated":{"line":1,"column":707}},{"source":"../../models/userModel.js","name":"minLength","original":{"line":30,"column":6},"generated":{"line":1,"column":736}},{"source":"../../models/userModel.js","original":{"line":30,"column":17},"generated":{"line":1,"column":746}},{"source":"../../models/userModel.js","name":"select","original":{"line":31,"column":6},"generated":{"line":1,"column":748}},{"source":"../../models/userModel.js","original":{"line":31,"column":14},"generated":{"line":1,"column":756}},{"source":"../../models/userModel.js","name":"passwordConfirm","original":{"line":33,"column":4},"generated":{"line":1,"column":759}},{"source":"../../models/userModel.js","original":{"line":33,"column":21},"generated":{"line":1,"column":775}},{"source":"../../models/userModel.js","name":"type","original":{"line":34,"column":6},"generated":{"line":1,"column":776}},{"source":"../../models/userModel.js","name":"String","original":{"line":34,"column":12},"generated":{"line":1,"column":781}},{"source":"../../models/userModel.js","name":"required","original":{"line":35,"column":6},"generated":{"line":1,"column":788}},{"source":"../../models/userModel.js","original":{"line":35,"column":16},"generated":{"line":1,"column":797}},{"source":"../../models/userModel.js","original":{"line":35,"column":17},"generated":{"line":1,"column":799}},{"source":"../../models/userModel.js","original":{"line":35,"column":23},"generated":{"line":1,"column":801}},{"source":"../../models/userModel.js","name":"validate","original":{"line":36,"column":6},"generated":{"line":1,"column":833}},{"source":"../../models/userModel.js","original":{"line":36,"column":16},"generated":{"line":1,"column":842}},{"source":"../../models/userModel.js","name":"validator","original":{"line":37,"column":8},"generated":{"line":1,"column":843}},{"source":"../../models/userModel.js","original":{"line":37,"column":19},"generated":{"line":1,"column":853}},{"source":"../../models/userModel.js","name":"val","original":{"line":37,"column":29},"generated":{"line":1,"column":862}},{"source":"../../models/userModel.js","name":"val","original":{"line":38,"column":17},"generated":{"line":1,"column":865}},{"source":"../../models/userModel.js","name":"val","original":{"line":38,"column":17},"generated":{"line":1,"column":872}},{"source":"../../models/userModel.js","original":{"line":38,"column":25},"generated":{"line":1,"column":876}},{"source":"../../models/userModel.js","name":"password","original":{"line":38,"column":30},"generated":{"line":1,"column":881}},{"source":"../../models/userModel.js","name":"message","original":{"line":40,"column":8},"generated":{"line":1,"column":891}},{"source":"../../models/userModel.js","original":{"line":40,"column":17},"generated":{"line":1,"column":899}},{"source":"../../models/userModel.js","name":"passwordChangedAt","original":{"line":44,"column":4},"generated":{"line":1,"column":930}},{"source":"../../models/userModel.js","name":"Date","original":{"line":44,"column":23},"generated":{"line":1,"column":948}},{"source":"../../models/userModel.js","name":"passwordResetToken","original":{"line":46,"column":4},"generated":{"line":1,"column":953}},{"source":"../../models/userModel.js","name":"String","original":{"line":46,"column":24},"generated":{"line":1,"column":972}},{"source":"../../models/userModel.js","name":"passwordResetExpires","original":{"line":48,"column":4},"generated":{"line":1,"column":979}},{"source":"../../models/userModel.js","name":"Date","original":{"line":48,"column":26},"generated":{"line":1,"column":1000}},{"source":"../../models/userModel.js","name":"active","original":{"line":50,"column":4},"generated":{"line":1,"column":1005}},{"source":"../../models/userModel.js","original":{"line":50,"column":12},"generated":{"line":1,"column":1012}},{"source":"../../models/userModel.js","name":"type","original":{"line":51,"column":6},"generated":{"line":1,"column":1013}},{"source":"../../models/userModel.js","name":"Boolean","original":{"line":51,"column":12},"generated":{"line":1,"column":1018}},{"source":"../../models/userModel.js","name":"default","original":{"line":52,"column":6},"generated":{"line":1,"column":1026}},{"source":"../../models/userModel.js","original":{"line":52,"column":15},"generated":{"line":1,"column":1035}},{"source":"../../models/userModel.js","name":"select","original":{"line":53,"column":6},"generated":{"line":1,"column":1037}},{"source":"../../models/userModel.js","original":{"line":53,"column":14},"generated":{"line":1,"column":1045}},{"source":"../../models/userModel.js","name":"shoppingCart","original":{"line":56,"column":4},"generated":{"line":1,"column":1048}},{"source":"../../models/userModel.js","original":{"line":56,"column":18},"generated":{"line":1,"column":1061}},{"source":"../../models/userModel.js","original":{"line":57,"column":6},"generated":{"line":1,"column":1062}},{"source":"../../models/userModel.js","name":"name","original":{"line":58,"column":8},"generated":{"line":1,"column":1063}},{"source":"../../models/userModel.js","name":"String","original":{"line":58,"column":14},"generated":{"line":1,"column":1068}},{"source":"../../models/userModel.js","name":"image","original":{"line":59,"column":8},"generated":{"line":1,"column":1075}},{"source":"../../models/userModel.js","name":"String","original":{"line":59,"column":15},"generated":{"line":1,"column":1081}},{"source":"../../models/userModel.js","name":"price","original":{"line":60,"column":8},"generated":{"line":1,"column":1088}},{"source":"../../models/userModel.js","name":"Number","original":{"line":60,"column":15},"generated":{"line":1,"column":1094}},{"source":"../../models/userModel.js","name":"quantity","original":{"line":61,"column":8},"generated":{"line":1,"column":1101}},{"source":"../../models/userModel.js","original":{"line":61,"column":18},"generated":{"line":1,"column":1110}},{"source":"../../models/userModel.js","name":"type","original":{"line":62,"column":10},"generated":{"line":1,"column":1111}},{"source":"../../models/userModel.js","name":"Number","original":{"line":62,"column":16},"generated":{"line":1,"column":1116}},{"source":"../../models/userModel.js","name":"default","original":{"line":63,"column":10},"generated":{"line":1,"column":1123}},{"source":"../../models/userModel.js","original":{"line":63,"column":19},"generated":{"line":1,"column":1131}},{"source":"../../models/userModel.js","name":"favoriteProducts","original":{"line":68,"column":4},"generated":{"line":1,"column":1136}},{"source":"../../models/userModel.js","original":{"line":68,"column":22},"generated":{"line":1,"column":1153}},{"source":"../../models/userModel.js","name":"type","original":{"line":69,"column":6},"generated":{"line":1,"column":1154}},{"source":"../../models/userModel.js","original":{"line":69,"column":12},"generated":{"line":1,"column":1159}},{"source":"../../models/userModel.js","name":"mongoose","original":{"line":69,"column":13},"generated":{"line":1,"column":1160}},{"source":"../../models/userModel.js","name":"Schema","original":{"line":69,"column":22},"generated":{"line":1,"column":1162}},{"source":"../../models/userModel.js","name":"ObjectId","original":{"line":69,"column":29},"generated":{"line":1,"column":1169}},{"source":"../../models/userModel.js","name":"ref","original":{"line":70,"column":6},"generated":{"line":1,"column":1179}},{"source":"../../models/userModel.js","original":{"line":70,"column":11},"generated":{"line":1,"column":1183}},{"source":"../../models/userModel.js","name":"userSchema","original":{"line":80,"column":0},"generated":{"line":1,"column":1196}},{"source":"../../models/userModel.js","name":"pre","original":{"line":80,"column":11},"generated":{"line":1,"column":1198}},{"source":"../../models/userModel.js","original":{"line":80,"column":15},"generated":{"line":1,"column":1202}},{"source":"../../models/userModel.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1209}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1220}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1224}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1226}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1228}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1247}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1252}},{"source":"../../models/userModel.js","name":"next","original":{"line":80,"column":39},"generated":{"line":1,"column":1261}},{"source":"../../models/userModel.js","name":"next","original":{"line":80,"column":39},"generated":{"line":1,"column":1263}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1266}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1273}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1292}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1297}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1306}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1309}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1316}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1323}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1325}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1330}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1332}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1338}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1343}},{"source":"../../models/userModel.js","original":{"line":81,"column":7},"generated":{"line":1,"column":1345}},{"source":"../../models/userModel.js","original":{"line":81,"column":7},"generated":{"line":1,"column":1348}},{"source":"../../models/userModel.js","name":"isModified","original":{"line":81,"column":12},"generated":{"line":1,"column":1353}},{"source":"../../models/userModel.js","original":{"line":81,"column":23},"generated":{"line":1,"column":1364}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1376}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1377}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1379}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1384}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1386}},{"source":"../../models/userModel.js","name":"next","original":{"line":81,"column":43},"generated":{"line":1,"column":1392}},{"source":"../../models/userModel.js","name":"next","original":{"line":81,"column":43},"generated":{"line":1,"column":1399}},{"source":"../../models/userModel.js","name":"next","original":{"line":81,"column":43},"generated":{"line":1,"column":1401}},{"source":"../../models/userModel.js","name":"next","original":{"line":81,"column":43},"generated":{"line":1,"column":1408}},{"source":"../../models/userModel.js","name":"next","original":{"line":81,"column":43},"generated":{"line":1,"column":1417}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1422}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1427}},{"source":"../../models/userModel.js","name":"bcrypt","original":{"line":83,"column":24},"generated":{"line":1,"column":1429}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1436}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1438}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1443}},{"source":"../../models/userModel.js","name":"bcrypt","original":{"line":83,"column":24},"generated":{"line":1,"column":1445}},{"source":"../../models/userModel.js","name":"hash","original":{"line":83,"column":31},"generated":{"line":1,"column":1447}},{"source":"../../models/userModel.js","original":{"line":83,"column":36},"generated":{"line":1,"column":1452}},{"source":"../../models/userModel.js","name":"password","original":{"line":83,"column":41},"generated":{"line":1,"column":1457}},{"source":"../../models/userModel.js","original":{"line":83,"column":51},"generated":{"line":1,"column":1466}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1470}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1475}},{"source":"../../models/userModel.js","name":"password","original":{"line":83,"column":7},"generated":{"line":1,"column":1477}},{"source":"../../models/userModel.js","name":"password","original":{"line":83,"column":7},"generated":{"line":1,"column":1482}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1491}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1493}},{"source":"../../models/userModel.js","name":"passwordConfirm","original":{"line":85,"column":7},"generated":{"line":1,"column":1498}},{"source":"../../models/userModel.js","name":"passwordConfirm","original":{"line":85,"column":7},"generated":{"line":1,"column":1503}},{"source":"../../models/userModel.js","name":"undefined","original":{"line":85,"column":25},"generated":{"line":1,"column":1524}},{"source":"../../models/userModel.js","name":"next","original":{"line":87,"column":2},"generated":{"line":1,"column":1526}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1530}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1535}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1537}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1541}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1547}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1554}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1556}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1565}},{"source":"../../models/userModel.js","original":{"line":80,"column":23},"generated":{"line":1,"column":1567}},{"source":"../../models/userModel.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1576}},{"source":"../../models/userModel.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1583}},{"source":"../../models/userModel.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1592}},{"source":"../../models/userModel.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1595}},{"source":"../../models/userModel.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1602}},{"source":"../../models/userModel.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1604}},{"source":"../../models/userModel.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1610}},{"source":"../../models/userModel.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1615}},{"source":"../../models/userModel.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1627}},{"source":"../../models/userModel.js","name":"userSchema","original":{"line":90,"column":0},"generated":{"line":1,"column":1631}},{"source":"../../models/userModel.js","name":"pre","original":{"line":90,"column":11},"generated":{"line":1,"column":1633}},{"source":"../../models/userModel.js","original":{"line":90,"column":15},"generated":{"line":1,"column":1637}},{"source":"../../models/userModel.js","original":{"line":90,"column":23},"generated":{"line":1,"column":1644}},{"source":"../../models/userModel.js","name":"next","original":{"line":90,"column":33},"generated":{"line":1,"column":1653}},{"source":"../../models/userModel.js","original":{"line":91,"column":6},"generated":{"line":1,"column":1656}},{"source":"../../models/userModel.js","original":{"line":91,"column":7},"generated":{"line":1,"column":1660}},{"source":"../../models/userModel.js","name":"isModified","original":{"line":91,"column":12},"generated":{"line":1,"column":1665}},{"source":"../../models/userModel.js","original":{"line":91,"column":23},"generated":{"line":1,"column":1676}},{"source":"../../models/userModel.js","original":{"line":91,"column":38},"generated":{"line":1,"column":1689}},{"source":"../../models/userModel.js","name":"isNew","original":{"line":91,"column":43},"generated":{"line":1,"column":1694}},{"source":"../../models/userModel.js","original":{"line":91,"column":50},"generated":{"line":1,"column":1700}},{"source":"../../models/userModel.js","name":"next","original":{"line":91,"column":57},"generated":{"line":1,"column":1707}},{"source":"../../models/userModel.js","name":"passwordChangedAt","original":{"line":93,"column":7},"generated":{"line":1,"column":1711}},{"source":"../../models/userModel.js","name":"passwordChangedAt","original":{"line":93,"column":7},"generated":{"line":1,"column":1716}},{"source":"../../models/userModel.js","name":"Date","original":{"line":93,"column":27},"generated":{"line":1,"column":1734}},{"source":"../../models/userModel.js","name":"now","original":{"line":93,"column":32},"generated":{"line":1,"column":1739}},{"source":"../../models/userModel.js","name":"next","original":{"line":95,"column":2},"generated":{"line":1,"column":1745}},{"source":"../../models/userModel.js","name":"userSchema","original":{"line":98,"column":0},"generated":{"line":1,"column":1751}},{"source":"../../models/userModel.js","name":"pre","original":{"line":98,"column":11},"generated":{"line":1,"column":1753}},{"source":"../../models/userModel.js","original":{"line":98,"column":15},"generated":{"line":1,"column":1757}},{"source":"../../models/userModel.js","original":{"line":98,"column":24},"generated":{"line":1,"column":1765}},{"source":"../../models/userModel.js","name":"next","original":{"line":98,"column":34},"generated":{"line":1,"column":1774}},{"source":"../../models/userModel.js","name":"populate","original":{"line":99,"column":7},"generated":{"line":1,"column":1777}},{"source":"../../models/userModel.js","name":"populate","original":{"line":99,"column":7},"generated":{"line":1,"column":1782}},{"source":"../../models/userModel.js","original":{"line":99,"column":16},"generated":{"line":1,"column":1791}},{"source":"../../models/userModel.js","name":"path","original":{"line":100,"column":4},"generated":{"line":1,"column":1792}},{"source":"../../models/userModel.js","original":{"line":100,"column":10},"generated":{"line":1,"column":1797}},{"source":"../../models/userModel.js","name":"select","original":{"line":101,"column":4},"generated":{"line":1,"column":1816}},{"source":"../../models/userModel.js","original":{"line":101,"column":12},"generated":{"line":1,"column":1823}},{"source":"../../models/userModel.js","name":"next","original":{"line":104,"column":2},"generated":{"line":1,"column":1856}},{"source":"../../models/userModel.js","name":"userSchema","original":{"line":107,"column":0},"generated":{"line":1,"column":1862}},{"source":"../../models/userModel.js","name":"pre","original":{"line":107,"column":11},"generated":{"line":1,"column":1864}},{"source":"../../models/userModel.js","original":{"line":107,"column":15},"generated":{"line":1,"column":1868}},{"source":"../../models/userModel.js","original":{"line":107,"column":24},"generated":{"line":1,"column":1876}},{"source":"../../models/userModel.js","name":"next","original":{"line":107,"column":34},"generated":{"line":1,"column":1885}},{"source":"../../models/userModel.js","name":"find","original":{"line":108,"column":7},"generated":{"line":1,"column":1888}},{"source":"../../models/userModel.js","name":"find","original":{"line":108,"column":7},"generated":{"line":1,"column":1893}},{"source":"../../models/userModel.js","original":{"line":108,"column":12},"generated":{"line":1,"column":1898}},{"source":"../../models/userModel.js","name":"active","original":{"line":108,"column":14},"generated":{"line":1,"column":1899}},{"source":"../../models/userModel.js","original":{"line":108,"column":22},"generated":{"line":1,"column":1906}},{"source":"../../models/userModel.js","name":"$ne","original":{"line":108,"column":24},"generated":{"line":1,"column":1907}},{"source":"../../models/userModel.js","original":{"line":108,"column":29},"generated":{"line":1,"column":1912}},{"source":"../../models/userModel.js","name":"next","original":{"line":110,"column":2},"generated":{"line":1,"column":1917}},{"source":"../../models/userModel.js","name":"userSchema","original":{"line":113,"column":0},"generated":{"line":1,"column":1923}},{"source":"../../models/userModel.js","name":"methods","original":{"line":113,"column":11},"generated":{"line":1,"column":1925}},{"source":"../../models/userModel.js","name":"correctPassword","original":{"line":113,"column":19},"generated":{"line":1,"column":1933}},{"source":"../../models/userModel.js","original":{"line":113,"column":0},"generated":{"line":1,"column":1949}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":1960}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":1964}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":1966}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":1968}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":1987}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":1992}},{"source":"../../models/userModel.js","name":"passwordInput","original":{"line":113,"column":44},"generated":{"line":1,"column":2001}},{"source":"../../models/userModel.js","name":"passwordInput","original":{"line":113,"column":44},"generated":{"line":1,"column":2003}},{"source":"../../models/userModel.js","name":"password_db","original":{"line":113,"column":59},"generated":{"line":1,"column":2005}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2008}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2015}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2034}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2039}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2048}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2051}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2058}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2065}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2067}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2072}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2074}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2080}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2085}},{"source":"../../models/userModel.js","name":"bcrypt","original":{"line":114,"column":8},"generated":{"line":1,"column":2087}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2094}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2096}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2101}},{"source":"../../models/userModel.js","name":"bcrypt","original":{"line":114,"column":8},"generated":{"line":1,"column":2103}},{"source":"../../models/userModel.js","name":"compare","original":{"line":114,"column":15},"generated":{"line":1,"column":2105}},{"source":"../../models/userModel.js","name":"passwordInput","original":{"line":114,"column":23},"generated":{"line":1,"column":2113}},{"source":"../../models/userModel.js","name":"password_db","original":{"line":114,"column":38},"generated":{"line":1,"column":2115}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2118}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2123}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2125}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2132}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2134}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2141}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2150}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2152}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2158}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2163}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2165}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2169}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2175}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2182}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2184}},{"source":"../../models/userModel.js","original":{"line":113,"column":37},"generated":{"line":1,"column":2193}},{"source":"../../models/userModel.js","original":{"line":113,"column":0},"generated":{"line":1,"column":2199}},{"source":"../../models/userModel.js","original":{"line":113,"column":0},"generated":{"line":1,"column":2206}},{"source":"../../models/userModel.js","original":{"line":113,"column":0},"generated":{"line":1,"column":2215}},{"source":"../../models/userModel.js","original":{"line":113,"column":0},"generated":{"line":1,"column":2217}},{"source":"../../models/userModel.js","original":{"line":113,"column":0},"generated":{"line":1,"column":2220}},{"source":"../../models/userModel.js","original":{"line":113,"column":0},"generated":{"line":1,"column":2227}},{"source":"../../models/userModel.js","original":{"line":113,"column":0},"generated":{"line":1,"column":2229}},{"source":"../../models/userModel.js","original":{"line":113,"column":0},"generated":{"line":1,"column":2235}},{"source":"../../models/userModel.js","original":{"line":113,"column":0},"generated":{"line":1,"column":2240}},{"source":"../../models/userModel.js","original":{"line":113,"column":0},"generated":{"line":1,"column":2252}},{"source":"../../models/userModel.js","name":"userSchema","original":{"line":116,"column":0},"generated":{"line":1,"column":2255}},{"source":"../../models/userModel.js","name":"methods","original":{"line":116,"column":11},"generated":{"line":1,"column":2257}},{"source":"../../models/userModel.js","name":"changedPasswordAfter","original":{"line":116,"column":19},"generated":{"line":1,"column":2265}},{"source":"../../models/userModel.js","original":{"line":116,"column":42},"generated":{"line":1,"column":2286}},{"source":"../../models/userModel.js","name":"JWTTimestamp","original":{"line":116,"column":52},"generated":{"line":1,"column":2295}},{"source":"../../models/userModel.js","original":{"line":117,"column":6},"generated":{"line":1,"column":2298}},{"source":"../../models/userModel.js","original":{"line":117,"column":6},"generated":{"line":1,"column":2306}},{"source":"../../models/userModel.js","name":"passwordChangedAt","original":{"line":117,"column":11},"generated":{"line":1,"column":2311}},{"source":"../../models/userModel.js","name":"JWTTimestamp","original":{"line":120,"column":11},"generated":{"line":1,"column":2330}},{"source":"../../models/userModel.js","name":"parseInt","original":{"line":118,"column":29},"generated":{"line":1,"column":2332}},{"source":"../../models/userModel.js","original":{"line":118,"column":38},"generated":{"line":1,"column":2341}},{"source":"../../models/userModel.js","name":"passwordChangedAt","original":{"line":118,"column":43},"generated":{"line":1,"column":2346}},{"source":"../../models/userModel.js","name":"getTime","original":{"line":118,"column":61},"generated":{"line":1,"column":2364}},{"source":"../../models/userModel.js","original":{"line":118,"column":73},"generated":{"line":1,"column":2374}},{"source":"../../models/userModel.js","name":"userSchema","original":{"line":126,"column":0},"generated":{"line":1,"column":2380}},{"source":"../../models/userModel.js","name":"methods","original":{"line":126,"column":11},"generated":{"line":1,"column":2382}},{"source":"../../models/userModel.js","name":"createPasswordResetToken","original":{"line":126,"column":19},"generated":{"line":1,"column":2390}},{"source":"../../models/userModel.js","original":{"line":126,"column":46},"generated":{"line":1,"column":2415}},{"source":"../../models/userModel.js","name":"resetToken","original":{"line":127,"column":8},"generated":{"line":1,"column":2426}},{"source":"../../models/userModel.js","name":"resetToken","original":{"line":127,"column":8},"generated":{"line":1,"column":2430}},{"source":"../../models/userModel.js","name":"crypto","original":{"line":127,"column":21},"generated":{"line":1,"column":2432}},{"source":"../../models/userModel.js","name":"randomBytes","original":{"line":127,"column":28},"generated":{"line":1,"column":2434}},{"source":"../../models/userModel.js","original":{"line":127,"column":40},"generated":{"line":1,"column":2446}},{"source":"../../models/userModel.js","name":"toString","original":{"line":127,"column":44},"generated":{"line":1,"column":2450}},{"source":"../../models/userModel.js","original":{"line":127,"column":53},"generated":{"line":1,"column":2459}},{"source":"../../models/userModel.js","name":"resetToken","original":{"line":136,"column":9},"generated":{"line":1,"column":2466}},{"source":"../../models/userModel.js","name":"passwordResetToken","original":{"line":129,"column":7},"generated":{"line":1,"column":2473}},{"source":"../../models/userModel.js","name":"passwordResetToken","original":{"line":129,"column":7},"generated":{"line":1,"column":2478}},{"source":"../../models/userModel.js","name":"crypto","original":{"line":129,"column":28},"generated":{"line":1,"column":2497}},{"source":"../../models/userModel.js","name":"createHash","original":{"line":130,"column":5},"generated":{"line":1,"column":2499}},{"source":"../../models/userModel.js","original":{"line":130,"column":16},"generated":{"line":1,"column":2510}},{"source":"../../models/userModel.js","name":"update","original":{"line":131,"column":5},"generated":{"line":1,"column":2520}},{"source":"../../models/userModel.js","name":"resetToken","original":{"line":131,"column":12},"generated":{"line":1,"column":2527}},{"source":"../../models/userModel.js","name":"digest","original":{"line":132,"column":5},"generated":{"line":1,"column":2530}},{"source":"../../models/userModel.js","original":{"line":132,"column":12},"generated":{"line":1,"column":2537}},{"source":"../../models/userModel.js","name":"passwordResetExpires","original":{"line":134,"column":7},"generated":{"line":1,"column":2544}},{"source":"../../models/userModel.js","name":"passwordResetExpires","original":{"line":134,"column":7},"generated":{"line":1,"column":2549}},{"source":"../../models/userModel.js","name":"Date","original":{"line":134,"column":30},"generated":{"line":1,"column":2570}},{"source":"../../models/userModel.js","name":"now","original":{"line":134,"column":35},"generated":{"line":1,"column":2575}},{"source":"../../models/userModel.js","original":{"line":134,"column":43},"generated":{"line":1,"column":2581}},{"source":"../../models/userModel.js","name":"resetToken","original":{"line":136,"column":9},"generated":{"line":1,"column":2585}},{"source":"../../models/userModel.js","original":{"line":139,"column":0},"generated":{"line":1,"column":2588}},{"source":"../../models/userModel.js","name":"User","original":{"line":139,"column":6},"generated":{"line":1,"column":2592}},{"source":"../../models/userModel.js","name":"mongoose","original":{"line":139,"column":13},"generated":{"line":1,"column":2594}},{"source":"../../models/userModel.js","name":"model","original":{"line":139,"column":22},"generated":{"line":1,"column":2596}},{"source":"../../models/userModel.js","original":{"line":139,"column":28},"generated":{"line":1,"column":2602}},{"source":"../../models/userModel.js","name":"userSchema","original":{"line":139,"column":36},"generated":{"line":1,"column":2609}},{"source":"../../models/userModel.js","name":"module","original":{"line":141,"column":0},"generated":{"line":1,"column":2612}},{"source":"../../models/userModel.js","name":"exports","original":{"line":141,"column":7},"generated":{"line":1,"column":2619}},{"source":"../../models/userModel.js","name":"User","original":{"line":141,"column":17},"generated":{"line":1,"column":2627}}],"sources":{"../../models/userModel.js":"const mongoose = require(\"mongoose\");\nconst validator = require(\"validator\");\nconst bcrypt = require(\"bcryptjs\");\nconst crypto = require(\"crypto\");\n\nconst userSchema = new mongoose.Schema(\n  {\n    name: {\n      type: String,\n      required: [true, \"Please tell us your name\"],\n    },\n    email: {\n      type: String,\n      required: [true, \"Please provide your email\"],\n      unique: true,\n      lowercase: true,\n      validate: [validator.isEmail, \"Invalid email\"],\n    },\n\n    role: {\n      type: String,\n      enum: [\"user\", \"admin\"],\n      default: \"user\",\n    },\n\n    photo: String,\n    password: {\n      type: String,\n      required: [true, \"Please provide a password\"],\n      minLength: 8,\n      select: false,\n    },\n    passwordConfirm: {\n      type: String,\n      required: [true, \"Please confirm your password\"],\n      validate: {\n        validator: function (val) {\n          return val === this.password;\n        },\n        message: \"passwords are not the same\",\n      },\n    },\n\n    passwordChangedAt: Date,\n\n    passwordResetToken: String,\n\n    passwordResetExpires: Date,\n\n    active: {\n      type: Boolean,\n      default: true,\n      select: false,\n    },\n\n    shoppingCart: [\n      {\n        name: String,\n        image: String,\n        price: Number,\n        quantity: {\n          type: Number,\n          default: 0,\n        },\n      },\n    ],\n\n    favoriteProducts: {\n      type: [mongoose.Schema.ObjectId],\n      ref: \"Product\",\n    },\n  }\n  // {\n  //   toJSON: { virtuals: true },\n  //   toObject: { virtuals: true },\n  // }\n);\n\n// encrypt password\nuserSchema.pre(\"save\", async function (next) {\n  if (!this.isModified(\"password\")) return next();\n\n  this.password = await bcrypt.hash(this.password, 12);\n\n  this.passwordConfirm = undefined;\n\n  next();\n});\n\nuserSchema.pre(\"save\", function (next) {\n  if (!this.isModified(\"password\") || this.isNew) return next();\n\n  this.passwordChangedAt = Date.now();\n\n  next();\n});\n\nuserSchema.pre(/^find/, function (next) {\n  this.populate({\n    path: \"favoriteProducts\",\n    select: \"-quantity -createdAt -images\",\n  });\n\n  next();\n});\n\nuserSchema.pre(/^find/, function (next) {\n  this.find({ active: { $ne: false } });\n\n  next();\n});\n\nuserSchema.methods.correctPassword = async (passwordInput, password_db) =>\n  await bcrypt.compare(passwordInput, password_db);\n\nuserSchema.methods.changedPasswordAfter = function (JWTTimestamp) {\n  if (this.passwordChangedAt) {\n    const changedTimestamp = parseInt(this.passwordChangedAt.getTime() / 1000);\n\n    return JWTTimestamp < changedTimestamp;\n  }\n\n  return false;\n};\n\nuserSchema.methods.createPasswordResetToken = function () {\n  const resetToken = crypto.randomBytes(32).toString(\"hex\");\n\n  this.passwordResetToken = crypto\n    .createHash(\"sha256\")\n    .update(resetToken)\n    .digest(\"hex\");\n\n  this.passwordResetExpires = Date.now() + 10 * 60 * 1000;\n\n  return resetToken;\n};\n\nconst User = mongoose.model(\"User\", userSchema);\n\nmodule.exports = User;\n"},"lineCount":null}},"error":null,"hash":"4e9e4e8fb493e0e2c3101c0774842d07","cacheData":{"env":{}}}