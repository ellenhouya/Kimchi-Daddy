{"id":"E1Ay","dependencies":[{"name":"/Users/ellenwang/Desktop/Ellen practice/Projects/Node projects/Projects/kimchi daddy/package.json","includedInParent":true,"mtime":1627058517687},{"name":"pug","loc":{"line":1,"column":20},"parent":"/Users/ellenwang/Desktop/Ellen practice/Projects/Node projects/Projects/kimchi daddy/utils/email.js","resolved":"/Users/ellenwang/Desktop/Ellen practice/Projects/Node projects/Projects/kimchi daddy/node_modules/pug/lib/index.js"},{"name":"nodemailer","loc":{"line":2,"column":27},"parent":"/Users/ellenwang/Desktop/Ellen practice/Projects/Node projects/Projects/kimchi daddy/utils/email.js","resolved":"/Users/ellenwang/Desktop/Ellen practice/Projects/Node projects/Projects/kimchi daddy/node_modules/nodemailer/lib/nodemailer.js"}],"generated":{"js":"var __dirname = \"/Users/ellenwang/Desktop/Ellen practice/Projects/Node projects/Projects/kimchi daddy/utils\";\nvar e=\"/Users/ellenwang/Desktop/Ellen practice/Projects/Node projects/Projects/kimchi daddy/utils\";function r(e,r,n,t,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?r(u):Promise.resolve(u).then(t,i)}function n(e){return function(){var n=this,t=arguments;return new Promise(function(i,o){var a=e.apply(n,t);function s(e){r(a,i,o,s,u,\"next\",e)}function u(e){r(a,i,o,s,u,\"throw\",e)}s(void 0)})}}function t(e,r){if(!(e instanceof r))throw new TypeError(\"Cannot call a class as a function\")}function i(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,\"value\"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function o(e,r,n){return r&&i(e.prototype,r),n&&i(e,n),e}var a=require(\"pug\"),s=require(\"nodemailer\");module.exports=function(){function r(e,n){t(this,r),this.to=e.email,this.firstName=e.name.split(\" \")[0],this.url=n,this.from=\"Ellen Wang <\".concat(void 0,\">\")}return o(r,[{key:\"newTransport\",value:function(){return s.createTransport({service:\"SendGrid\",auth:{user:void 0,pass:void 0}})}},{key:\"send\",value:function(){var r=n(regeneratorRuntime.mark(function r(n,t){var i,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i=a.renderFile(\"\".concat(e,\"/../views/emails/\").concat(n,\".pug\"),{firstName:this.firstName,url:this.url,subject:t}),o={from:this.from,to:this.to,subject:t,html:i},r.next=4,this.newTransport().sendMail(o);case 4:case\"end\":return r.stop()}},r,this)}));return function(e,n){return r.apply(this,arguments)}}()},{key:\"sendWelcome\",value:function(){var e=n(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send(\"welcome\",\"泡菜老爹感謝您註冊成為會員\");case 2:case\"end\":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:\"sendPasswordReset\",value:function(){var e=n(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send(\"passwordReset\",\"重新設定密碼憑證（10 分鐘後失效）\");case 2:case\"end\":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),r}();"},"sourceMaps":{"js":{"mappings":[{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":0}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":4}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":6}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":99}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":108}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":110}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":112}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":114}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":116}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":118}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":120}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":122}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":125}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":129}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":133}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":135}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":137}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":140}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":143}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":145}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":147}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":153}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":159}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":162}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":174}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":176}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":179}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":181}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":186}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":188}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":191}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":199}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":207}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":210}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":215}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":217}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":220}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":229}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":231}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":234}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":241}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":252}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":256}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":258}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":263}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":265}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":275}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":282}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":286}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":294}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":303}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":305}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":308}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":312}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":314}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":316}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":322}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":324}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":327}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":336}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":338}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":341}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":343}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":345}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":347}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":349}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":351}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":353}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":360}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":363}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":372}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":374}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":377}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":379}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":381}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":383}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":385}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":387}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":389}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":397}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":400}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":407}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":413}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":422}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":424}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":426}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":429}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":434}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":447}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":450}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":456}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":460}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":470}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":507}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":516}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":518}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":520}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":523}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":527}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":531}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":533}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":535}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":537}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":539}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":546}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":550}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":551}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":555}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":557}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":559}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":562}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":564}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":575}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":577}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":590}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":592}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":594}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":608}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":610}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":620}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":624}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":626}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":636}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":639}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":646}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":661}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":663}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":665}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":669}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":673}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":682}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":684}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":686}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":688}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":691}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":698}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":701}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":703}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":705}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":715}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":718}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":721}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":723}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":725}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":728}},{"source":"../../utils/email.js","original":{"line":1,"column":0},"generated":{"line":2,"column":730}},{"source":"../../utils/email.js","name":"pug","original":{"line":1,"column":6},"generated":{"line":2,"column":734}},{"source":"../../utils/email.js","name":"require","original":{"line":1,"column":12},"generated":{"line":2,"column":736}},{"source":"../../utils/email.js","original":{"line":1,"column":20},"generated":{"line":2,"column":744}},{"source":"../../utils/email.js","name":"nodemailer","original":{"line":2,"column":6},"generated":{"line":2,"column":751}},{"source":"../../utils/email.js","name":"require","original":{"line":2,"column":19},"generated":{"line":2,"column":753}},{"source":"../../utils/email.js","original":{"line":2,"column":27},"generated":{"line":2,"column":761}},{"source":"../../utils/email.js","name":"module","original":{"line":5,"column":0},"generated":{"line":2,"column":775}},{"source":"../../utils/email.js","name":"exports","original":{"line":5,"column":7},"generated":{"line":2,"column":782}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":790}},{"source":"../../utils/email.js","name":"user","original":{"line":6,"column":14},"generated":{"line":2,"column":801}},{"source":"../../utils/email.js","name":"user","original":{"line":6,"column":14},"generated":{"line":2,"column":810}},{"source":"../../utils/email.js","name":"user","original":{"line":6,"column":14},"generated":{"line":2,"column":812}},{"source":"../../utils/email.js","name":"url","original":{"line":6,"column":20},"generated":{"line":2,"column":814}},{"source":"../../utils/email.js","original":{"line":6,"column":25},"generated":{"line":2,"column":817}},{"source":"../../utils/email.js","original":{"line":6,"column":25},"generated":{"line":2,"column":819}},{"source":"../../utils/email.js","original":{"line":6,"column":25},"generated":{"line":2,"column":824}},{"source":"../../utils/email.js","name":"to","original":{"line":7,"column":9},"generated":{"line":2,"column":827}},{"source":"../../utils/email.js","name":"to","original":{"line":7,"column":9},"generated":{"line":2,"column":832}},{"source":"../../utils/email.js","name":"user","original":{"line":7,"column":14},"generated":{"line":2,"column":835}},{"source":"../../utils/email.js","name":"email","original":{"line":7,"column":19},"generated":{"line":2,"column":837}},{"source":"../../utils/email.js","name":"firstName","original":{"line":8,"column":9},"generated":{"line":2,"column":843}},{"source":"../../utils/email.js","name":"firstName","original":{"line":8,"column":9},"generated":{"line":2,"column":848}},{"source":"../../utils/email.js","name":"user","original":{"line":8,"column":21},"generated":{"line":2,"column":858}},{"source":"../../utils/email.js","name":"name","original":{"line":8,"column":26},"generated":{"line":2,"column":860}},{"source":"../../utils/email.js","name":"split","original":{"line":8,"column":31},"generated":{"line":2,"column":865}},{"source":"../../utils/email.js","original":{"line":8,"column":37},"generated":{"line":2,"column":871}},{"source":"../../utils/email.js","original":{"line":8,"column":42},"generated":{"line":2,"column":876}},{"source":"../../utils/email.js","name":"url","original":{"line":9,"column":9},"generated":{"line":2,"column":879}},{"source":"../../utils/email.js","name":"url","original":{"line":9,"column":9},"generated":{"line":2,"column":884}},{"source":"../../utils/email.js","name":"url","original":{"line":9,"column":15},"generated":{"line":2,"column":888}},{"source":"../../utils/email.js","name":"from","original":{"line":10,"column":9},"generated":{"line":2,"column":890}},{"source":"../../utils/email.js","name":"from","original":{"line":10,"column":9},"generated":{"line":2,"column":895}},{"source":"../../utils/email.js","original":{"line":10,"column":4},"generated":{"line":2,"column":900}},{"source":"../../utils/email.js","original":{"line":10,"column":4},"generated":{"line":2,"column":915}},{"source":"../../utils/email.js","original":{"line":10,"column":4},"generated":{"line":2,"column":927}},{"source":"../../utils/email.js","original":{"line":10,"column":4},"generated":{"line":2,"column":929}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":934}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":941}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":943}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":945}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":946}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":947}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":951}},{"source":"../../utils/email.js","original":{"line":13,"column":2},"generated":{"line":2,"column":966}},{"source":"../../utils/email.js","original":{"line":13,"column":2},"generated":{"line":2,"column":972}},{"source":"../../utils/email.js","name":"nodemailer","original":{"line":15,"column":13},"generated":{"line":2,"column":983}},{"source":"../../utils/email.js","name":"nodemailer","original":{"line":15,"column":13},"generated":{"line":2,"column":990}},{"source":"../../utils/email.js","name":"createTransport","original":{"line":15,"column":24},"generated":{"line":2,"column":992}},{"source":"../../utils/email.js","original":{"line":15,"column":40},"generated":{"line":2,"column":1008}},{"source":"../../utils/email.js","name":"service","original":{"line":16,"column":8},"generated":{"line":2,"column":1009}},{"source":"../../utils/email.js","original":{"line":16,"column":17},"generated":{"line":2,"column":1017}},{"source":"../../utils/email.js","name":"auth","original":{"line":17,"column":8},"generated":{"line":2,"column":1028}},{"source":"../../utils/email.js","original":{"line":17,"column":14},"generated":{"line":2,"column":1033}},{"source":"../../utils/email.js","name":"user","original":{"line":18,"column":10},"generated":{"line":2,"column":1034}},{"source":"../../utils/email.js","original":{"line":17,"column":14},"generated":{"line":2,"column":1044}},{"source":"../../utils/email.js","name":"pass","original":{"line":19,"column":10},"generated":{"line":2,"column":1046}},{"source":"../../utils/email.js","original":{"line":19,"column":14},"generated":{"line":2,"column":1056}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1063}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1064}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1068}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1075}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1081}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1092}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1096}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1098}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1100}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1119}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1124}},{"source":"../../utils/email.js","name":"template","original":{"line":35,"column":13},"generated":{"line":2,"column":1133}},{"source":"../../utils/email.js","name":"template","original":{"line":35,"column":13},"generated":{"line":2,"column":1135}},{"source":"../../utils/email.js","name":"subject","original":{"line":35,"column":23},"generated":{"line":2,"column":1137}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1140}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1144}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1146}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1148}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1155}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1174}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1179}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1188}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1191}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1198}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1205}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1207}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1212}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1214}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1220}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1225}},{"source":"../../utils/email.js","original":{"line":53,"column":10},"generated":{"line":2,"column":1227}},{"source":"../../utils/email.js","name":"html","original":{"line":36,"column":10},"generated":{"line":2,"column":1234}},{"source":"../../utils/email.js","name":"pug","original":{"line":36,"column":17},"generated":{"line":2,"column":1236}},{"source":"../../utils/email.js","name":"renderFile","original":{"line":36,"column":21},"generated":{"line":2,"column":1238}},{"source":"../../utils/email.js","name":"__dirname","original":{"line":37,"column":9},"generated":{"line":2,"column":1249}},{"source":"../../utils/email.js","name":"__dirname","original":{"line":37,"column":9},"generated":{"line":2,"column":1252}},{"source":"../../utils/email.js","name":"__dirname","original":{"line":37,"column":9},"generated":{"line":2,"column":1259}},{"source":"../../utils/email.js","name":"template","original":{"line":37,"column":38},"generated":{"line":2,"column":1261}},{"source":"../../utils/email.js","name":"template","original":{"line":37,"column":38},"generated":{"line":2,"column":1282}},{"source":"../../utils/email.js","name":"template","original":{"line":37,"column":38},"generated":{"line":2,"column":1289}},{"source":"../../utils/email.js","original":{"line":38,"column":6},"generated":{"line":2,"column":1291}},{"source":"../../utils/email.js","original":{"line":38,"column":6},"generated":{"line":2,"column":1299}},{"source":"../../utils/email.js","name":"firstName","original":{"line":39,"column":8},"generated":{"line":2,"column":1300}},{"source":"../../utils/email.js","original":{"line":39,"column":19},"generated":{"line":2,"column":1310}},{"source":"../../utils/email.js","name":"firstName","original":{"line":39,"column":24},"generated":{"line":2,"column":1315}},{"source":"../../utils/email.js","name":"url","original":{"line":40,"column":8},"generated":{"line":2,"column":1325}},{"source":"../../utils/email.js","original":{"line":40,"column":13},"generated":{"line":2,"column":1329}},{"source":"../../utils/email.js","name":"url","original":{"line":40,"column":18},"generated":{"line":2,"column":1334}},{"source":"../../utils/email.js","name":"subject","original":{"line":41,"column":8},"generated":{"line":2,"column":1338}},{"source":"../../utils/email.js","name":"subject","original":{"line":41,"column":8},"generated":{"line":2,"column":1346}},{"source":"../../utils/email.js","name":"mailOptions","original":{"line":45,"column":10},"generated":{"line":2,"column":1350}},{"source":"../../utils/email.js","original":{"line":45,"column":24},"generated":{"line":2,"column":1352}},{"source":"../../utils/email.js","name":"from","original":{"line":46,"column":6},"generated":{"line":2,"column":1353}},{"source":"../../utils/email.js","original":{"line":46,"column":12},"generated":{"line":2,"column":1358}},{"source":"../../utils/email.js","name":"from","original":{"line":46,"column":17},"generated":{"line":2,"column":1363}},{"source":"../../utils/email.js","name":"to","original":{"line":47,"column":6},"generated":{"line":2,"column":1368}},{"source":"../../utils/email.js","original":{"line":47,"column":10},"generated":{"line":2,"column":1371}},{"source":"../../utils/email.js","name":"to","original":{"line":47,"column":15},"generated":{"line":2,"column":1376}},{"source":"../../utils/email.js","name":"subject","original":{"line":48,"column":6},"generated":{"line":2,"column":1379}},{"source":"../../utils/email.js","name":"subject","original":{"line":48,"column":6},"generated":{"line":2,"column":1387}},{"source":"../../utils/email.js","name":"html","original":{"line":49,"column":6},"generated":{"line":2,"column":1389}},{"source":"../../utils/email.js","name":"html","original":{"line":49,"column":6},"generated":{"line":2,"column":1394}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1397}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1399}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1404}},{"source":"../../utils/email.js","original":{"line":53,"column":10},"generated":{"line":2,"column":1406}},{"source":"../../utils/email.js","name":"newTransport","original":{"line":53,"column":15},"generated":{"line":2,"column":1411}},{"source":"../../utils/email.js","name":"sendMail","original":{"line":53,"column":30},"generated":{"line":2,"column":1426}},{"source":"../../utils/email.js","name":"mailOptions","original":{"line":53,"column":39},"generated":{"line":2,"column":1435}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1438}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1443}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1445}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1449}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1455}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1462}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1464}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1473}},{"source":"../../utils/email.js","original":{"line":35,"column":2},"generated":{"line":2,"column":1475}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1484}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1491}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1500}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1502}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1505}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1512}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1514}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1520}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1525}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1537}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1541}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1542}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1546}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1560}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1566}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1577}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1581}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1583}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1585}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1604}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1609}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1618}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1622}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1629}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1648}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1653}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1662}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1665}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1672}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1679}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1681}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1686}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1688}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1694}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1699}},{"source":"../../utils/email.js","original":{"line":57,"column":10},"generated":{"line":2,"column":1701}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1708}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1710}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1715}},{"source":"../../utils/email.js","original":{"line":57,"column":10},"generated":{"line":2,"column":1717}},{"source":"../../utils/email.js","name":"send","original":{"line":57,"column":15},"generated":{"line":2,"column":1722}},{"source":"../../utils/email.js","original":{"line":57,"column":20},"generated":{"line":2,"column":1727}},{"source":"../../utils/email.js","original":{"line":57,"column":31},"generated":{"line":2,"column":1737}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1754}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1759}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1761}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1765}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1771}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1778}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1780}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1789}},{"source":"../../utils/email.js","original":{"line":56,"column":2},"generated":{"line":2,"column":1791}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1800}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1807}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1818}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1825}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1827}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1833}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1838}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1850}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1854}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1855}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1859}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1879}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":1885}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":1896}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":1900}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":1902}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":1904}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":1923}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":1928}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":1937}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":1941}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":1948}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":1967}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":1972}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":1981}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":1984}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":1991}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":1998}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":2000}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":2005}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":2007}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":2013}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":2018}},{"source":"../../utils/email.js","original":{"line":61,"column":10},"generated":{"line":2,"column":2020}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":2027}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":2029}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":2034}},{"source":"../../utils/email.js","original":{"line":61,"column":10},"generated":{"line":2,"column":2036}},{"source":"../../utils/email.js","name":"send","original":{"line":61,"column":15},"generated":{"line":2,"column":2041}},{"source":"../../utils/email.js","original":{"line":61,"column":20},"generated":{"line":2,"column":2046}},{"source":"../../utils/email.js","original":{"line":61,"column":37},"generated":{"line":2,"column":2062}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":2084}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":2089}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":2091}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":2095}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":2101}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":2108}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":2110}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":2119}},{"source":"../../utils/email.js","original":{"line":60,"column":2},"generated":{"line":2,"column":2121}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":2130}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":2137}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":2148}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":2155}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":2157}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":2163}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":2168}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":2180}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":2186}},{"source":"../../utils/email.js","original":{"line":5,"column":0},"generated":{"line":2,"column":2188}}],"sources":{"../../utils/email.js":"const pug = require(\"pug\");\nconst nodemailer = require(\"nodemailer\");\n// const htmlToText = require(\"html-to-text\");\n\nmodule.exports = class Email {\n  constructor(user, url) {\n    this.to = user.email;\n    this.firstName = user.name.split(\" \")[0];\n    this.url = url;\n    this.from = `Ellen Wang <${process.env.EMAIL_FROM}>`;\n  }\n\n  newTransport() {\n    if (process.env.NODE_ENV === \"production\") {\n      return nodemailer.createTransport({\n        service: \"SendGrid\",\n        auth: {\n          user: process.env.SENDGRID_USERNAME,\n          pass: process.env.SENDGRID_PASSWORD,\n        },\n      });\n    }\n\n    // DEV\n    return nodemailer.createTransport({\n      host: process.env.EMAIL_HOST,\n      port: process.env.EMAIL_PORT,\n      auth: {\n        user: process.env.EMAIL_USERNAME,\n        pass: process.env.EMAIL_PASSWORD,\n      },\n    });\n  }\n\n  async send(template, subject) {\n    const html = pug.renderFile(\n      `${__dirname}/../views/emails/${template}.pug`,\n      {\n        firstName: this.firstName,\n        url: this.url,\n        subject,\n      }\n    );\n\n    const mailOptions = {\n      from: this.from,\n      to: this.to,\n      subject,\n      html,\n      // text: htmlToText.fromString(html),\n    };\n\n    await this.newTransport().sendMail(mailOptions);\n  }\n\n  async sendWelcome() {\n    await this.send(\"welcome\", \"泡菜老爹感謝您註冊成為會員\");\n  }\n\n  async sendPasswordReset() {\n    await this.send(\"passwordReset\", \"重新設定密碼憑證（10 分鐘後失效）\");\n  }\n};\n"},"lineCount":null}},"error":null,"hash":"345131594feb295ec08fc0d3e8edbbc5","cacheData":{"env":{"NODE_ENV":"production"}}}